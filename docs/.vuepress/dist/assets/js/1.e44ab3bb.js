(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{299:function(t,e,r){"use strict";var i=r(165),n=r(164),o=r(5),s=r(23),c=r(97),a=r(166),u=r(12),l=r(167),h=r(66),f=r(1),d=[].push,g=Math.min,p=!f((function(){return!RegExp(4294967295,"y")}));i("split",2,(function(t,e,r){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,r){var i=String(s(this)),o=void 0===r?4294967295:r>>>0;if(0===o)return[];if(void 0===t)return[i];if(!n(t))return e.call(i,t,o);for(var c,a,u,l=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),g=0,p=new RegExp(t.source,f+"g");(c=h.call(p,i))&&!((a=p.lastIndex)>g&&(l.push(i.slice(g,c.index)),c.length>1&&c.index<i.length&&d.apply(l,c.slice(1)),u=c[0].length,g=a,l.length>=o));)p.lastIndex===c.index&&p.lastIndex++;return g===i.length?!u&&p.test("")||l.push(""):l.push(i.slice(g)),l.length>o?l.slice(0,o):l}:"0".split(void 0,0).length?function(t,r){return void 0===t&&0===r?[]:e.call(this,t,r)}:e,[function(e,r){var n=s(this),o=null==e?void 0:e[t];return void 0!==o?o.call(e,n,r):i.call(String(n),e,r)},function(t,n){var s=r(i,t,this,n,i!==e);if(s.done)return s.value;var h=o(t),f=String(this),d=c(h,RegExp),v=h.unicode,b=(h.ignoreCase?"i":"")+(h.multiline?"m":"")+(h.unicode?"u":"")+(p?"y":"g"),y=new d(p?h:"^(?:"+h.source+")",b),m=void 0===n?4294967295:n>>>0;if(0===m)return[];if(0===f.length)return null===l(y,f)?[f]:[];for(var w=0,x=0,O=[];x<f.length;){y.lastIndex=p?x:0;var I,S=l(y,p?f:f.slice(x));if(null===S||(I=g(u(y.lastIndex+(p?0:x)),f.length))===w)x=a(f,x,v);else{if(O.push(f.slice(w,x)),O.length===m)return O;for(var j=1;j<=S.length-1;j++)if(O.push(S[j]),O.length===m)return O;x=w=I}}return O.push(f.slice(w)),O}]}),!p)},300:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},301:function(t,e,r){"use strict";var i=r(0),n=r(302).trim;i({target:"String",proto:!0,forced:r(303)("trim")},{trim:function(){return n(this)}})},302:function(t,e,r){var i=r(23),n="["+r(300)+"]",o=RegExp("^"+n+n+"*"),s=RegExp(n+n+"*$"),c=function(t){return function(e){var r=String(i(e));return 1&t&&(r=r.replace(o,"")),2&t&&(r=r.replace(s,"")),r}};t.exports={start:c(1),end:c(2),trim:c(3)}},303:function(t,e,r){var i=r(1),n=r(300);t.exports=function(t){return i((function(){return!!n[t]()||"​᠎"!="​᠎"[t]()||n[t].name!==t}))}},304:function(t,e,r){"use strict";var i=r(0),n=r(28).find,o=r(92),s=r(17),c=!0,a=s("find");"find"in[]&&Array(1).find((function(){c=!1})),i({target:"Array",proto:!0,forced:c||!a},{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),o("find")},305:function(t,e,r){var i=r(0),n=r(323),o=r(92);i({target:"Array",proto:!0},{fill:n}),o("fill")},308:function(t,e,r){var i=r(4),n=r(170);t.exports=function(t,e,r){var o,s;return n&&"function"==typeof(o=e.constructor)&&o!==r&&i(s=o.prototype)&&s!==r.prototype&&n(t,s),t}},323:function(t,e,r){"use strict";var i=r(10),n=r(98),o=r(12);t.exports=function(t){for(var e=i(this),r=o(e.length),s=arguments.length,c=n(s>1?arguments[1]:void 0,r),a=s>2?arguments[2]:void 0,u=void 0===a?r:n(a,r);u>c;)e[c++]=t;return e}},324:function(t,e,r){var i=r(0),n=r(1),o=r(13),s=r(25).f,c=r(7),a=n((function(){s(1)}));i({target:"Object",stat:!0,forced:!c||a,sham:!c},{getOwnPropertyDescriptor:function(t,e){return s(o(t),e)}})},325:function(t,e,r){"use strict";r.d(e,"e",(function(){return n})),r.d(e,"c",(function(){return o})),r.d(e,"b",(function(){return s})),r.d(e,"a",(function(){return c})),r.d(e,"f",(function(){return a})),r.d(e,"d",(function(){return u}));r(305),r(161),r(64),r(163),r(42),r(160),r(9),r(41),r(96),r(162),r(65),r(299),r(301);var i=r(29),n=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return r.some((function(e){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()===e}))},o=function(t){return n(t,"number")?t:n(t,"string")?t.includes("%")?t.slice(0,-1)/100:~~t.replace(/px/g,""):0},s=function(t){return Math.PI/180*t},c=function(t){var e=t.padding.replace(/px/g,"").split(" ").map((function(t){return~~t}))||[0],r=0,i=0,o=0,s=0;switch(e.length){case 1:r=i=o=s=e[0];break;case 2:r=i=e[0],o=s=e[1];break;case 3:r=e[0],o=s=e[1],i=e[2];break;default:r=e[0],i=e[1],o=e[2],s=e[3]}var c={paddingTop:r,paddingBottom:i,paddingLeft:o,paddingRight:s};for(var a in c)c[a]=t.hasOwnProperty(a)&&n(t[a],"string","number")?~~String(t[a]).replace(/px/g,""):c[a];return[r,i,o,s]},a=function(t,e,r,i,n,o,s){var c=Math.min(i,n);o>c/2&&(o=c/2),t.beginPath(),t.fillStyle=s,t.moveTo(e+o,r),t.lineTo(e+o,r),t.lineTo(e+i-o,r),t.arcTo(e+i,r,e+i,r+o,o),t.lineTo(e+i,r+n-o),t.arcTo(e+i,r+n,e+i-o,r+n,o),t.lineTo(e+o,r+n),t.arcTo(e,r+n,e,r+n-o,o),t.lineTo(e,r+o),t.arcTo(e,r,e+o,r,o),t.closePath(),t.fill()},u=function(t,e,r,n,o,s){var c,a=/linear-gradient\((.+)\)/.exec(s)[1].split(",").map((function(t){return t.trim()})),u=a.shift();if(u.includes("deg")){var l=function(t){return Math.tan(t/180*Math.PI)};(u=u.slice(0,-3)%360)>=0&&u<45?c=[e,r+o,e+n,r+o-n*l(u-0)]:u>=45&&u<90?c=[e,r+o,e+n-o*l(u-45),r]:u>=90&&u<135?c=[e+n,r+o,e+n-o*l(u-90),r]:u>=135&&u<180?c=[e+n,r+o,e,r+n*l(u-135)]:u>=180&&u<225?c=[e+n,r,e,r+n*l(u-180)]:u>=225&&u<270?c=[e+n,r,e+o*l(u-225),r+o]:u>=270&&u<315?c=[e,r,e+o*l(u-270),r+o]:u>=315&&u<360&&(c=[e,r,e+n,r+o-n*l(u-315)])}else u.includes("top")?c=[e,r+o,e,r]:u.includes("bottom")?c=[e,r,e,r+o]:u.includes("left")?c=[e+n,r,e,r]:u.includes("right")&&(c=[e,r,e+n,r]);var h=t.createLinearGradient.apply(t,Object(i.a)(c.map((function(t){return t>>0}))));return a.reduce((function(t,e,r){var n=e.split(" ");return 1===n.length?t.addColorStop(r,n[0]):2===n.length&&t.addColorStop.apply(t,Object(i.a)(n)),t}),h)}},337:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));r(43),r(24),r(93),r(324),r(171),r(95),r(94);function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}},342:function(t,e,r){"use strict";r(168),r(364),r(305),r(304),r(93),r(161),r(64),r(163),r(42),r(365),r(41),r(162),r(65),r(299),r(94);var i=r(91),n=r(337),o=r(29),s=r(325),c={props:{prizes:{type:Array,validator:function(t){return t.every((function(t,e){return t.hasOwnProperty("x")?!!t.hasOwnProperty("y")||console.error("prizes[".concat(e,"]缺少 y 属性")):console.error("prizes[".concat(e,"]缺少 x 属性"))}))},default:function(){return[]}},button:{type:Object,validator:function(t){return t.hasOwnProperty("x")?!!t.hasOwnProperty("y")||console.error("button对象缺少 y 属性"):console.error("button对象缺少 x 属性")}},blocks:{type:Array,validator:function(t){return t.every((function(t,e){return t.padding?(t.background||console.error("blocks[".concat(e,"]缺少 background 属性")),!0):console.error("blocks[".concat(e,"]缺少 padding 属性"))}))},default:function(){return[]}},defaultStyle:{type:Object,default:function(){return{}}},activeStyle:{type:Object,default:function(){return{}}},cols:{type:Number|String,default:3},rows:{type:Number|String,default:3},demo:{type:Boolean,default:!1}},data:function(){return{dpr:2,ctx:null,canPlay:!0,currIndex:0,prizeFlag:void 0,prizeArea:{},cells:[],cellImgs:new Array(this.cols*this.rows).fill().map((function(t){return[]})),animationId:0,timer:0,speed:0}},watch:{prizes:{handler:function(t,e){var r=this,i=[];return e?t&&t.forEach((function(t,n){var o=[],s=e[n];s?t.imgs&&t.imgs.forEach((function(t,e){var i=s.imgs[e];i&&r.cellImgs[n][e]?t.src!==i.src&&(o[e]=t):o[e]=t})):o=t.imgs,i[n]=o})):i=t.map((function(t){return t.imgs})),this.init(i)},deep:!0},button:{handler:function(t,e){var r=this,i=[],n=this.cols*this.rows-1;if(e&&e.imgs){if(t.imgs){var o=[];t.imgs.forEach((function(t,i){var s=e.imgs[i];s&&r.cellImgs[n][i]?t.src!==s.src&&(o[i]=t):o[i]=t})),i[n]=o}}else i[n]=t.imgs;return this.init(i)},deep:!0}},computed:{prizeIndex:function(){return this.currIndex%this.prizes.length>>0},_defaultStyle:function(){var t={gutter:5,borderRadius:20,fontColor:"#000",fontSize:"18px",fontStyle:"sans-serif, STHeiti, SimHei",textAlign:"center",background:"#fff",shadow:""};for(var e in this.defaultStyle)t[e]=this.defaultStyle[e];return t.borderRadius*=this.dpr,t.gutter*=this.dpr,t.lineHeight||(t.lineHeight=t.fontSize),t},_activeStyle:function(){var t={background:"#ffce98",shadow:""};for(var e in this.activeStyle)t[e]=this.activeStyle[e];return t}},mounted:function(){this.dpr=window.devicePixelRatio||2;var t=[];this.prizes&&(t=this.prizes.map((function(t){return t.imgs}))),this.button&&(t[this.cols*this.rows-1]=this.button.imgs),this.init(t),window.addEventListener("resize",this.init.bind(this))},methods:{init:function(t){var e=this,r=this.dpr,c=this._defaultStyle,a=this.$refs.luckDraw;if(!a)return!1;var u=this.$refs.luckDraw.childNodes[0];this.ctx=u.getContext("2d"),this.boxWidth=u.width=a.offsetWidth*r,this.boxHeight=u.height=a.offsetHeight*r;var l=function(t){return(t*r-t)/(t*r)*(r/2)*100};u.style="transform: scale(".concat(1/r,") translate(\n        ").concat(-l(this.boxWidth),"%,\n        ").concat(-l(this.boxHeight),"%\n      )"),this.canPlay=!0,this.currIndex=this.prizeIndex,this.prizeFlag=void 0,clearInterval(this.timer),cancelAnimationFrame(this.animationId),this.cells=Object(o.a)(this.prizes),this.button&&(this.cells[this.cols*this.rows-1]=Object(n.a)(Object(n.a)({},this.button),{},{index:null})),this.cells.forEach((function(t){t.col=t.col||1,t.row=t.row||1})),this.blockData=[],this.prizeArea=this.blocks.reduce((function(t,n){var o=t.x,c=t.y,a=t.w,u=t.h,l=Object(s.a)(n).map((function(t){return t*r})),h=Object(i.a)(l,4),f=h[0],d=h[1],g=h[2],p=h[3];return e.blockData.push([o,c,a,u,n.borderRadius?n.borderRadius*r:0,n.background]),{x:o+g,y:c+f,w:a-g-p,h:u-f-d}}),{x:0,y:0,w:this.boxWidth,h:this.boxHeight}),this.cellWidth=(this.prizeArea.w-c.gutter*(this.cols-1))/this.cols,this.cellHeight=(this.prizeArea.h-c.gutter*(this.rows-1))/this.rows;var h=function(){e.draw(),e.demo&&e.walk(),e.button&&(u.onmousedown=function(t){var r=e.getGeometricProperty([e.button.x,e.button.y]),n=Object(i.a)(r,2),o=n[0],s=n[1];if(t.offsetX<o||t.offsetY<s||t.offsetX>o+e.cellWidth||t.offsetY>s+e.cellWidth)return!1;e.$emit("start",t)})},f=0,d=0;Object(s.e)(t,"array")&&(this.draw(),t.forEach((function(t,r){if(!t)return!1;t.forEach((function(t,i){d++,e.loadAndCacheImg(r,i,(function(){f++,d===f&&h.call(e)}))}))}))),d||h.call(this)},loadAndCacheImg:function(t,e,r){var i=this,n=this.cells[t];if(!n)return!1;var o=n.imgs[e],s=new Image;this.cellImgs[t]||(this.cellImgs[t]=[]),this.cellImgs[t][e]={img:s},s.src=o.src,s.onload=function(){var c=i.cellImgs[t][e];if(!c)return!1;o.width&&o.height?(c.trueWidth=i.getWidth(o.width,n.col),c.trueHeight=i.getHeight(o.height,n.row)):o.width&&!o.height?(c.trueWidth=i.getWidth(o.width,n.col),c.trueHeight=s.height*(c.trueWidth/s.width)):!o.width&&o.height?(c.trueHeight=i.getHeight(o.height,n.row),c.trueWidth=s.width*(c.trueHeight/s.height)):(c.trueWidth=s.width,c.trueHeight=s.height),r.call(i)}},draw:function(){var t=this,e=this.ctx,r=this.dpr,n=this._defaultStyle,o=this._activeStyle;e.fillStyle="rgba(255, 255, 255, 0)",e.fillRect(0,0,this.boxWidth,this.boxWidth),this.blockData.forEach((function(r){var n=Object(i.a)(r,6),o=n[0],c=n[1],a=n[2],u=n[3],l=n[4],h=n[5];Object(s.f)(e,o,c,a,u,l,t.handleBackground(o,c,a,u,h))})),this.cells.forEach((function(c,a){var u=t.getGeometricProperty([c.x,c.y,c.col,c.row]),l=Object(i.a)(u,4),h=l[0],f=l[1],d=l[2],g=l[3],p=a===t.prizeIndex,v=(p?o.shadow:c.shadow||n.shadow).replace(/px/g,"").split(",")[0].split(" ").map((function(t,e){return e<3?t*r:t}));4===v.length&&(e.shadowColor=v[3],e.shadowOffsetX=v[0],e.shadowOffsetY=v[1],e.shadowBlur=v[2],v[0]>0?d-=v[0]:(d+=v[0],h-=v[0]),v[1]>0?g-=v[1]:(g+=v[1],f-=v[1])),Object(s.f)(e,h,f,d,g,Object(s.e)(c.borderRadius,"number")?c.borderRadius*r:n.borderRadius,t.handleBackground(h,f,d,g,c.background,p)),e.shadowColor="rgba(255, 255, 255, 0)",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,c.imgs&&c.imgs.forEach((function(r,i){if(!t.cellImgs[a])return!1;var n=t.cellImgs[a][i];n&&e.drawImage(n.img,h+t.getOffsetX(n.trueWidth,c.col),f+t.getHeight(r.top,c.row),n.trueWidth,n.trueHeight)})),c.fonts&&c.fonts.forEach((function(i){String(i.text).split("\n").forEach((function(a,u){e.beginPath();var l=p&&o.fontStyle?o.fontStyle:i.fontStyle||n.fontStyle,d=p&&o.fontSize?Object(s.c)(o.fontSize):Object(s.c)(i.fontSize||n.fontSize);e.font=d*r+"px "+l,e.fillStyle=p&&o.fontColor?o.fontColor:i.fontColor||n.fontColor,e.fillText(a,h+t.getOffsetX(e.measureText(a).width,c.col),f+t.getHeight(i.top,c.row)+(u+1)*Object(s.c)(i.lineHeight||n.lineHeight)*r)}))}))}))},handleBackground:function(t,e,r,i,n){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=this.ctx,a=this._defaultStyle,u=this._activeStyle;return(n=o?u.background:n||a.background).includes("linear-gradient")&&(n=Object(s.d)(c,t,e,r,i,n)),n},play:function(){if(clearInterval(this.timer),!this.canPlay)return!1;this.prizeFlag=void 0,this.canPlay=!1,this.setSpeed(),this.run()},run:function(){if(this.prizeFlag==this.prizeIndex)return this.slowDown();this.speed<.4&&void 0===this.prizeFlag&&(this.speed+=.002),this.currIndex+=this.speed,this.draw(),this.animationId=window.requestAnimationFrame(this.run)},stop:function(t){this.prizeFlag=t},slowDown:function(){var t=this;if(this.speed<.025){if(this.prizeFlag==this.prizeIndex)return this.speed=0,this.canPlay=!0,this.$emit("end",Object(n.a)({},this.prizes.find((function(e,r){return r===t.prizeIndex})))),!1}else this.speed-=.0015;this.currIndex+=this.speed,this.draw(),window.requestAnimationFrame(this.slowDown)},getGeometricProperty:function(t){var e=Object(i.a)(t,4),r=e[0],n=e[1],o=e[2],s=e[3],c=[this.prizeArea.x+(this.cellWidth+this._defaultStyle.gutter)*r,this.prizeArea.y+(this.cellHeight+this._defaultStyle.gutter)*n];return o&&s&&c.push(this.cellWidth*o+this._defaultStyle.gutter*(o-1),this.cellHeight*s+this._defaultStyle.gutter*(s-1)),c},getWidth:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(s.e)(t,"number")?t*this.dpr:Object(s.e)(t,"string")?t.includes("%")?(this.cellWidth*e+this._defaultStyle.gutter*(e-1))*t.slice(0,-1)/100:t.replace(/px/g,"")*this.dpr:0},getHeight:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(s.e)(t,"number")?t*this.dpr:Object(s.e)(t,"string")?t.includes("%")?(this.cellHeight*e+this._defaultStyle.gutter*(e-1))*t.slice(0,-1)/100:t.replace(/px/g,"")*this.dpr:0},getOffsetX:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(this.cellWidth*e+this._defaultStyle.gutter*(e-1)-t)/2},setSpeed:function(){this.speed=.2},walk:function(){var t=this;clearInterval(this.timer),this.timer=setInterval((function(){t.currIndex+=1,t.draw()}),1300)}}},a=r(40),u=Object(a.a)(c,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{ref:"luckDraw",staticStyle:{overflow:"hidden"}},[e("canvas")])}),[],!1,null,null,null);e.a=u.exports},364:function(t,e,r){"use strict";var i=r(0),n=r(28).every,o=r(31),s=r(17),c=o("every"),a=s("every");i({target:"Array",proto:!0,forced:!c||!a},{every:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},365:function(t,e,r){"use strict";var i=r(7),n=r(3),o=r(99),s=r(14),c=r(6),a=r(18),u=r(308),l=r(44),h=r(1),f=r(45),d=r(67).f,g=r(25).f,p=r(8).f,v=r(302).trim,b=n.Number,y=b.prototype,m="Number"==a(f(y)),w=function(t){var e,r,i,n,o,s,c,a,u=l(t,!1);if("string"==typeof u&&u.length>2)if(43===(e=(u=v(u)).charCodeAt(0))||45===e){if(88===(r=u.charCodeAt(2))||120===r)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:i=2,n=49;break;case 79:case 111:i=8,n=55;break;default:return+u}for(s=(o=u.slice(2)).length,c=0;c<s;c++)if((a=o.charCodeAt(c))<48||a>n)return NaN;return parseInt(o,i)}return+u};if(o("Number",!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var x,O=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof O&&(m?h((function(){y.valueOf.call(r)})):"Number"!=a(r))?u(new b(w(e)),r,O):w(e)},I=i?d(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;I.length>S;S++)c(b,x=I[S])&&!c(O,x)&&p(O,x,g(b,x));O.prototype=y,y.constructor=O,s(n,"Number",O)}}}]);